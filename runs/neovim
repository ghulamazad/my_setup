#!/usr/bin/env bash
# This script installs Neovim, Lua tools, and Go debugger for Ubuntu 24.04 with i3.

# Update package index
sudo apt-get update

# Install prerequisites
sudo apt-get install -y neovim tmux python3-pynvim lua5.4 liblua5.4-dev luarocks rustc cargo golang-go

# Install stylua via cargo
cargo install stylua

# Install luacheck via luarocks
sudo luarocks install luacheck

# Install Delve (Go debugger)
go install github.com/go-delve/delve/cmd/dlv@latest

# Add Go and Rust binaries to PATH (if not already in ~/.bashrc)
if ! grep -q 'export PATH=$PATH:$HOME/go/bin:$HOME/.cargo/bin' ~/.bashrc; then
    echo 'export PATH=$PATH:$HOME/go/bin:$HOME/.cargo/bin' >> ~/.bashrc
fi

# Add newline for clean output
printf "\n%.0s" {1..2}